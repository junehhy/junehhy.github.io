<!DOCTYPE html>
<html style="height: 100%">

<head>
    <meta charset="utf-8">
</head>

<body style="height: 100%; margin: 0">
    <div id="container" style="height: 80%"></div>
    <div id="attachment" style="height:20%"></div>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts-all-3.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
    <script type="text/javascript">
        var dom = document.getElementById("container");
        var att = document.getElementById("attachment");
        var myChart = echarts.init(dom);
        var pieChart = echarts.init(att);
        var app = {};
        option = null;
        option2 = null;

        //------------------------------------引用请注明出处
        var countries = ['Australia', 'Cambodia', 'Canada', 'China, Hong Kong SAR', 'China, Macao SAR', 'Dem. People‘s Rep. of Korea', 'Denmark', 'France', 'Germany', 'Hungary', 'Japan', 'Kyrgyzstan', 'Lao People’s Dem. Rep.', 'Malaysia', 'Mexico', 'Mongolia', 'Myanmar', 'Nepal', 'Netherlands', 'New Zealand', 'Rep. of Korea', 'Russian Federation', 'Thailand', 'Turkmenistan', 'United Kingdom', 'Uruguay', 'USA'];

        var years = ['2002', '2004', '2006', '2008', '2010', '2012'];
        var subdata=[[
    
[279048,0,0.6338],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,0.5161],
[25424,0,2.8219],
[-10000000,-10000000,0.1734],
[0,303,0.2437],
[-10000000,-10000000,0.0698],
[-10000000,-10000000,0.1919],
[-10000000,-10000000,0.3990],
[-10000000,-10000000,-10000000.0000],
[31500,0,6.3378],
[4000,0,0.0048],
[-10000000,-10000000,0.0014],
[-10000000,-10000000,0.6253],
[-10000000,-10000000,-10000000.0000],
[0,3600,0.0167],
[-10000000,-10000000,0.0409],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,0.2591],
[1282,0,0.3028],
[0,72364,1.8901],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[23069,0,0.0020],
[-10000000,-10000000,0.1586],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,3.4875]

 ], [
       [109864,0,1.6175],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,1.3201],
[96236,0,3.1060],
[54367,0,0.1675],
[0,750,0.7587],
[-10000000,-10000000,0.2486],
[-10000000,-10000000,0.2234],
[665760,0,0.5559],
[-10000000,-10000000,0.0064],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,0.0067],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,0.1879],
[242,23503,0.0279],
[-10000000,-10000000,0.0371],
[-10000000,-10000000,0.0083],
[40590,0,0.3982],
[-10000000,-10000000,0.9905],
[0,103915,2.0509],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,1.0282],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,0.3267],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,3.9959]

    ],
    [
        [45182,0,1.0584],
[-10000000,-10000000,0.0073],
[-10000000,-10000000,0.8943],
[87381,0,3.6292],
[-10000000,-10000000,0.2221],
[-10000000,-10000000,0.4822],
[-10000000,-10000000,0.2061],
[-10000000,-10000000,0.5262],
[-10000000,-10000000,0.8490],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[12000,0,0.1076],
[-10000000,-10000000,0.0053],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,0.2660],
[0,3000,0.0444],
[-10000000,-10000000,0.0768],
[-10000000,-10000000,-10000000.0000],
[75138,0,0.7127],
[29348,0,0.6459],
[0,69000,2.7227],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,1.4286],
[1,0,0.0016],
[8877,0,0.4848],
[-10000000,-10000000,-10000000.0000],
[3087,0,5.5326]


    ],
[
    [357084,0,1.4851],
[-10000000,-10000000,0.0081],
[-10000000,-10000000,1.3414],
[174716,0,5.0791],
[-10000000,-10000000,0.3175],
[0,10000,0.2335],
[-10000000,-10000000,1.0016],
[359456,0,1.4225],
[906542,0,1.3020],
[-10000000,-10000000,0.0153],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[0,1068,0.0137],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[38030,1500,0.0487],
[-10000000,-10000000,0.1787],
[-10000000,-10000000,0.0181],
[1190897,0,1.0884],
[12333,0,0.9133],
[0,8410,2.8704],
[210514,0,2.5589],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[770,0,0.6777],
[-10000000,-10000000,-10000000.0000],
[1370075,0,9.9462]

],
[

 [2365467,0,2.6898],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,2.2215],
[18000,0,5.9790],
[-10000000,-10000000,0.3264],
[0,20496,0.2630],
[-10000000,-10000000,1.3070],
[-10000000,-10000000,0.9022],
[1157529,0,1.5674],
[-10000000,-10000000,0.0134],
[514992,0,9.7601],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[1122501,5520,0.0685],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,0.0326],
[3112339,0,1.2049],
[487696,0,2.1741],
[0,12401,3.3494],
[162916,0,2.7581],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[1159,0,0.8162],
[-10000000,-10000000,0.2318],
[2263372,0,9.7275]


],
[
 [1259742,0,8.2984],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,5.3969],
[394220,0,15.3840],
[-10000000,-10000000,0.8448],
[-10000000,-10000000,0.9363],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,2.5787],
[5157762,0,5.2522],
[-10000000,-10000000,0.0275],
[781062,0,25.1298],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,5.1415],
[-10000000,-10000000,-10000000.0000],
[89460,2018000,0.1784],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,0.0858],
[29278526,0,3.2512],
[3650886,0,8.2194],
[0,545100,7.8232],
[301372,0,6.5305],
[-10000000,-10000000,-10000000.0000],
[-10000000,-10000000,-10000000.0000],
[3476,0,1.9891],
[-10000000,-10000000,1.2493],
[5082210,0,33.0878]]];

        var data = [[

            [16519588, 0, 0.633778822],
            [-1000000, -1000000, -1000000],
            [7596002, 0, 0.516087106],
            [25424, 301626218, 2.821939438],
            [0, 27776471, 0.173422658],
            [0, 88493, 0.243744698],
            [1097028, 0, 0.069825805],
            [1455469, 0, 0.191941051],
            [729689, 0, 0.39900695],
            [-1000000, -1000000, -1000000],
            [31500, 0, 6.337825515],
            [4000, 2428, 0.004804433],
            [0, 6750, 0.001444726],
            [0, 502727, 0.625302945],
            [-1000000, -1000000, -1000000],
            [0, 32745, 0.016674031],
            [0, 232050, 0.040905526],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [547238, 0, 0.259063425],
            [794883, 0, 0.302834264],
            [0, 72364, 1.890093369],
            [-1000000, -1000000, -1000000],
            [23069, 0, 0.002045316],
            [894976, 0, 0.15855736],
            [-1000000, -1000000, -1000000],
            [11255926, 0, 3.487515489]

        ], [
            [108160798, 0, 1.617456617],
            [-1000000, -1000000, -1000000],
            [656800, 0, 1.320107669],
            [96236, 281182565, 3.10597663],
            [54367, 25547623, 0.167480214],
            [0, 56290, 0.758672961],
            [1083390, 0, 0.248585712],
            [920529, 0, 0.223387015],
            [3148382, 0, 0.555927383],
            [46130, 0, 0.006362419],
            [-1000000, -1000000, -1000000],
            [0, 850, 0.006703387],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [54320, 0, 0.187910734],
            [242, 42476, 0.02794949],
            [0, 19225, 0.03708393],
            [0, 4688, 0.008331645],
            [40590, 0, 0.398195271],
            [85744020, 0, 0.990505042],
            [0, 103915, 2.050916996],
            [-1000000, -1000000, -1000000],
            [0, 78963, 1.028237811],
            [-1000000, -1000000, -1000000],
            [8723184, 0, 0.326701135],
            [-1000000, -1000000, -1000000],
            [1660541, 0, 3.995889399]


        ],
        [
            [18773323, 0, 1.058396308],
            [0, 5139, 0.007303899],
            [684996, 0, 0.894337883],
            [87381, 264856336, 3.629221948],
            [0, 28039673, 0.222052651],
            [0, 137315, 0.482161121],
            [1447890, 0, 0.206127878],
            [580212, 0, 0.526184339],
            [112839, 0, 0.848978936],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [12000, 0, 0.107609334],
            [0, 29005, 0.005295],
            [-1000000, -1000000, -1000000],
            [46249, 0, 0.26598903],
            [0, 63774, 0.044383638],
            [0, 3380, 0.076830283],
            [-1000000, -1000000, -1000000],
            [1860140, 0, 0.712716187],
            [5835988, 0, 0.64586112],
            [0, 69000, 2.722723157],
            [-1000000, -1000000, -1000000],
            [0, 6155, 1.428612175],
            [1, 0, 0.001561049],
            [663249, 0, 0.48475084],
            [-1000000, -1000000, -1000000],
            [14513709, 0, 5.53257708]


        ],
        [
            [26778011, 0, 1.485132435],
            [0, 104058, 0.008093897],
            [5099812, 0, 1.341397677],
            [174716, 421534243, 5.079105282],
            [0, 37364330, 0.31748051],
            [0, 15926, 0.233494352],
            [414434, 0, 1.00156102],
            [2214622, 0, 1.422511238],
            [906542, 0, 1.302025569],
            [114091, 0, 0.015291159],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [32741, 0, 0.013690781],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [38030, 177369, 0.048671968],
            [0, 8677, 0.178681999],
            [0, 173406, 0.018114435],
            [2869317, 0, 1.088358383],
            [7515233, 0, 0.913290737],
            [0, 8410, 2.870355012],
            [210514, 0, 2.558914595],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [836359, 0, 0.677666984],
            [-1000000, -1000000, -1000000],
            [39629714, 0, 9.946188248]

        ],
        [
            [146574235, 0, 2.689804642],
            [-1000000, -1000000, -1000000],
            [944080, 0, 2.22145619],
            [18000, 377898756, 5.978969619],
            [0, 34750702, 0.326407038],
            [0, 42458, 0.262983069],
            [3884451, 0, 1.307032274],
            [3383176, 0, 0.902231538],
            [1157529, 0, 1.567445474],
            [406215, 0, 0.013383869],
            [514992, 0, 9.760140697],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [1122501, 111900, 0.068516787],
            [-1000000, -1000000, -1000000],
            [0, 640725, 0.032648009],
            [4504273, 0, 1.204888611],
            [31705071, 0, 2.174101069],
            [0, 12401, 3.34939039],
            [162916, 0, 2.758081479],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [1159, 0, 0.816239652],
            [19242480, 0, 0.231750893],
            [32064968, 0, 9.727538195]


        ],
        [
            [182514666, 0, 8.298403994],
            [-1000000, -1000000, -1000000],
            [6967078, 0, 5.396934136],
            [197110, 500991894, 15.38400071],
            [0, 48241468, 0.844820444],
            [0, 83737, 0.936259092],
            [-1000000, -1000000, -1000000],
            [8325286, 0, 2.578675144],
            [2578881, 0, 5.252243462],
            [182598, 0, 0.027500736],
            [390531, 0, 25.12979773],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [0, 4285, 5.14147305],
            [-1000000, -1000000, -1000000],
            [44730, 1122944, 0.178426658],
            [-1000000, -1000000, -1000000],
            [0, 602030, 0.08583313],
            [15126970, 0, 3.251214538],
            [106906062, 0, 8.219413164],
            [0, 272550, 7.823162664],
            [150686, 0, 6.53049339],
            [-1000000, -1000000, -1000000],
            [-1000000, -1000000, -1000000],
            [2921528, 0, 1.98913249],
            [77786300, 0, 1.249277718],
            [64511202, 0, 33.08781963]

        ]

        ];

        //定义地图上点的坐标                                                  
        var coords = [
            [133.775136, -25.274398, 0, ' Australia'],
            [104.990963, 12.565679, 0, ' Cambodia '],
            [-106.346771, 56.130366, 0, ' Canada '],
            [104.195397, 35.86166, 0, ' China, Hong Kong SAR '],
            [104.195397, 35.86166, 0, ' China, Macao SAR '],
            [127.510093, 40.339852, 0, ' Dem. People’s Rep. of Korea '],
            [9.501785, 56.26392, 0, ' Denmark '],
            [2.213749, 46.227638, ' France '],
            [10.451526, 51.165691, 0, ' Germany '],
            [19.503304, 47.162494, 0, ' Hungary '],
            [138.252924, 36.204824, 0, ' Japan '],
            [74.766098, 41.20438, 0, ' Kyrgyzstan '],
            [102.495496, 19.85627, 0, ' Lao People‘s Dem. Rep.'],
            [101.975766, 4.210484, 0, ' Malaysia '],
            [-102.552784, 23.634501, 0, ' Mexico '],
            [103.846656, 46.862496, 0, ' Mongolia '],
            [95.956223, 21.913965, 0, ' Myanmar '],
            [84.12400799999999, 28.394857, 0, ' Nepal '],
            [5.291265999999999, 52.132633, 0, ' Netherlands '],
            [174.885971, -40.900557, 0, ' New Zealand '],
            [127.766922, 35.907757, 0, ' Rep. of Korea '],
            [105.318756, 61.52401, 0, ' Russian Federation '],
            [100.992541, 15.870032, 0, ' Thailand '],
            [59.556278, 38.969719, 0, ' Turkmenistan '],
            [-3.435973, 55.378051, 0, ' United Kingdom '],
            [-55.765835, -32.522779, 0, ' Uruguay '],
            [-95.712891, 37.09024, 0, ' USA ']

        ];
        // 如果看不懂这段代码，那么就不用这段代码，
        // 自己估计一个最大值也可以。
        function getMax(dim) {
            var max = 0;
            data.forEach(function (dataByYear) {
                dataByYear.forEach(function (item) {
                    if (item[dim] > max) {
                        max = item[dim];
                    }
                });
            });
            var exp = Math.round(Math.log(max) / Math.log(10));
            var exp10 = Math.pow(10, exp);
            max = Math.ceil(max / exp10 * 10) / 10 * exp10;

            return max;
        }


        var itemStyle = {
            normal: {
                opacity: 0.8,
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowOffsetY: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
        };

        // Schema:
        option = {
            baseOption: {
                timeline: {
                    axisType: 'category',
                    orient: 'vertical',
                    autoPlay: true,
                    inverse: true,
                    playInterval: 3000,
                    left: null,
                    right: 10,
                    top: 20,
                    bottom: 20,
                    width: 55,
                    height: null,
                    label: {
                        normal: {
                            textStyle: {
                                color: '#ddd'
                            }
                        },
                        emphasis: {
                            textStyle: {
                                color: '#fff'
                            }
                        }
                    },
                    symbol: 'none',
                    lineStyle: {
                        color: '#555'
                    },
                    checkpointStyle: {
                        color: '#bbb',
                        borderColor: '#777',
                        borderWidth: 2
                    },
                    controlStyle: {
                        showNextBtn: false,
                        showPrevBtn: false,
                        normal: {
                            color: '#666',
                            borderColor: '#666'
                        },
                        emphasis: {
                            color: '#aaa',
                            borderColor: '#aaa'
                        }
                    },
                    data: years
                },
                backgroundColor: '#000000',
                //把数字当作了title
                title: {

                    text: '',
                    right: 80,
                    bottom: 80,
                    textStyle: {
                        fontSize: 70,
                        fontWeight: 'bolder',
                        //color:'rgba(255, 255, 255, 0.9)'
                        color: '#DAA520'
                    },
                    subtext: 'Trade Value of LACF',
                    subtextStyle: {
                        fontSize: 40,
                        //fontWeight: 'bolder',
                        //color:'#FFD700'
                        color: '#DAA520'
                    },
                },
                tooltip: {
                    padding: 5,
                    backgroundColor: '#222',
                    borderColor: '#777',
                    borderWidth: 1
                },
                xAxis: {
                    //  type: 'log',
                    type: 'value',
                    name: 'LACF Import Trade Value (US$)',
                    nameGap: 25,
                    min: 0,
                    max: getMax(0),
                    nameLocation: 'middle',
                    nameTextStyle: {
                        fontSize: 14
                    },
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLabel: {
                        textStyle: {
                            color: '#ddd'
                        }
                    }
                },
                yAxis: {
                    type: 'value',
                    name: 'LACF Export Trade Value (US$)',
                    nameGap: 25,//坐标轴标题的距离
                    min: 0,
                    max: getMax(1),
                    nameTextStyle: {
                        color: '#ccc',
                        fontSize: 14
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisTick: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        formatter: '{value} ',
                        textStyle: {
                            color: '#ddd'
                        }
                    }
                },
                grid: {
                    top: '40%',
                    left: 250,
                    right: 130
                },
                geo: {
                    top: 20,
                    left: 170,
                    right: 120,
                    height: '50%',
                    name: 'World',
                    type: 'map',
                    map: 'world',
                    roam: false,
                    label: {
                        emphasis: {
                            show: false
                        }
                    },
                    itemStyle: {
                        normal: {
                            borderColor: '#696969',
                            areaColor: '#eee8ab'//'#F5FFFA'
                        },

                        emphasis: {
                            areaColor: '#F0E68C'
                        }
                    }
                },
                toolbox: {
                    top: 20,
                    left: 10,
                    itemSize: 15,
                    iconStyle: {
                        normal: {
                            borderColor: '#eee'
                        },
                        emphasis: {
                            borderColor: '#fffb60'
                        }
                    }
                },
                brush: {    //互动，左上角
                    toolbox: ['polygon', 'keep', 'clear'],
                    brushLink: 'all',

                    outOfBrush: {
                        opacity: .1,
                        color: '#aaa'
                    }
                },

                //图例
                visualMap: [{
                    type: 'piecewise',
                    dimension: 3,
                    categories: countries,
                    left: 0,
                    top: 60,
                    calculable: true,
                    precision: 0.1,
                    textGap: 10,
                    itemGap: 3,
                    itemHeight: 10,
                    textStyle: {
                        color: '#ccc'
                    },
                    inRange: {
                        color: ['#00FFFF', '#9966cc', '#b95c25', '#eee8ab', '#a35015', '#d50390', '#36a15d', '#9dc5c8', '#e1e8c8', '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8', '#bda29a', '#376956', '#c3bed4', '#04dd98', '#d9b3e6', '#b6c3fc', '#315dbc', '#c5c975', '#476a54', '#66e638', '#a59619', '#822ee2', '#49450d', '#eeebd4']
                    },
                    outOfRange: {
                        color: '#555'
                    }
                }, {
                    show: false,
                    type: 'continuous',
                    dimension: 2,
                    min: 0,
                    max: 5,
                    inRange: {
                        symbolSize: [10, 50]
                    }
                }],
                series: [{
                    type: 'scatter',
                    id: 'gridScatter',
                    itemStyle: itemStyle,
                    data: [],
                    //圆圈各数值名称显示           
                    tooltip: {
                        formatter: function (obj) {
                            var value = obj.value;
                            return '<div style="border-bottom: 1px solid #555;padding-bottom: 5px; margin-bottom: 5px;">' + value[3] + '</div>'
                                + 'LACF Import Trade Value：' + value[0] + ' (US $)<br>'
                                + 'LACF Export Trade Value：' + value[1] + ' (US $)<br>'
                                + 'Total Trade Value with China：' + value[2] + ' (US billion $)<br>';
                        }
                    }
                },
                //上方地图的鼠标移动显示
                {
                    type: 'scatter',
                    id: 'geoScatter',
                    coordinateSystem: 'geo',

                    itemStyle: {
                        normal: {

                            opacity: 1,
                            shadowBlur: 5,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        },
                    },
                    data: coords,
                    symbolSize: 15,
                    tooltip: {
                        formatter: function (obj) {
                            var value = obj.value;
                            return schema[3].text + '：' + value[3];
                        }
                    }
                }],
                animationDurationUpdate: 1000,
                animationEasingUpdate: 'quinticInOut'
            },
            options: []

        };
        //这个循环是针对闪动的数字
        for (var n = 0; n < years.length; n++) {
            option.options.push({
                title: {
                    text: years[n]
                },
                series: {
                    id: 'gridScatter',
                    type: 'scatter',
                    itemStyle: itemStyle,
                    data: data[n].map(function (item, index) {
                        return item.concat([countries[index]]);
                    }),
                    symbolSize: 10
                }
            });
        }

        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }

        option2 = {
            baseOption: {
                timeline: {
                    data: [
                        '2002', '2004', '2006', '2008', '2010', '2012',
                    ],
                    symbolRotate: '30',
                    playInterval: '1000',//随时间变动速度。越大越慢
                    loop: true,
                    axisType: 'category',
                    autoPlay: false,
                    symbol: 'circle',
                    show: false
                },

                tooltip: {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },



                series: [{
                    name: 'Export',
                    type: 'pie',
                    minAngle: 10,
                    startAngle:230,
                    center:['75%','60%'],
                    //roseType: 'area',
                    radius: ['45%', '75%'],
                    color: ['#a0dca0', '#60bbb6', '#f78db3', '#feadac', '#fae395'],
                    label: {
                        normal: {
                            //show: false,
                            //position: 'inner'
                            formatter: '{b}\n{d}%'
                        }
                    }
                }, {
                    name: 'Import',
                    type: 'pie',
                    startAngle:230,
                    center:['30%','60%'],
                    radius: ['45%', '75%'],
                    color: ['#a0dca0', '#60bbb6', '#f78db3', '#feadac', '#fae395'],
                    label:
                        {
                            normal: {
                                //position: 'inner',
                                formatter: '{b}\n{d}%'
                            }
                        },
                }]
            },

            options: [{
                title: {
                    
                        },
                backgroundColor: '#000000',
                series: [{ //ex
                    data: [
                        { value: 152534.0, name: 'Equine species, live' },
                        { value: 1321360984.0, name: 'Live animals chiefly for food' },
                        { value: 1311862106.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 2726855846.0, name: 'Meat and preparations' },
                        { value: 29203385238.0, name: 'Food and live animals chiefly for food' }
                    ],
                },
                //im

                {
                    data: [
                        { value: 728646.0, name: 'Equine species, live' },
                        { value: 163899168.0, name: 'Live animals chiefly for food' },
                        { value: 1252844746.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 1273061348.0, name: 'Meat and preparations' },
                        { value: 10448103642.0, name: 'Food and live animals chiefly for food' }
                    ],
                }
                ]

            }, {
                title: {
                    //text: '2004',

                },

                series: [{ //ex
                    data: [
                        { value: 256336.0, name: 'Equine species, live' },
                        { value: 1258362460.0, name: 'Live animals chiefly for food' },
                        { value: 1395318374.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 3198335508.0, name: 'Meat and preparations' },
                        { value: 37687917236.0, name: 'Food and live animals chiefly for food' }
                    ],
                },
                //im

                {
                    data: [
                        { value: 1934118.0, name: 'Equine species, live' },
                        { value: 841558116.0, name: 'Live animals chiefly for food' },
                        { value: 951348756.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 958066184.0, name: 'Meat and preparations' },
                        { value: 18284250108.0, name: 'Food and live animals chiefly for food' }
                    ],
                }
                ]

            }, {
                title: {
                    //text: '2006',

                },

                series: [{ //ex
                    data: [
                        { value: 146310.0, name: 'Equine species, live' },
                        { value: 1191136956.0, name: 'Live animals chiefly for food' },
                        { value: 1481410568.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 4043968276.0, name: 'Meat and preparations' },
                        { value: 51351654042.0, name: 'Food and live animals chiefly for food' }
                    ],
                },
                //im

                {
                    data: [
                        { value: 532844.0, name: 'Equine species, live' },
                        { value: 178471908.0, name: 'Live animals chiefly for food' },
                        { value: 1371258236.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 1387301920.0, name: 'Meat and preparations' },
                        { value: 19952028362.0, name: 'Food and live animals chiefly for food' }
                    ],
                }
                ]

            }, {
                title: {
                    //text: '2008',

                },

                series: [{ //ex
                    data: [
                        { value: 181956.0, name: 'Equine species, live' },
                        { value: 1842665104.0, name: 'Live animals chiefly for food' },
                        { value: 1574843051.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 3827916494.0, name: 'Meat and preparations' },
                        { value: 65428017734.0, name: 'Food and live animals chiefly for food' }
                    ],
                },
                //im

                {
                    data: [
                        { value: 9241604.0, name: 'Equine species, live' },
                        { value: 348328940.0, name: 'Live animals chiefly for food' },
                        { value: 4601584438.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 4620233236.0, name: 'Meat and preparations' },
                        { value: 28077605322.0, name: 'Food and live animals chiefly for food' }
                    ],
                }
                ]

            }, {
                title: {
                   // text: '2010',

                },

                series: [{ //ex
                    data: [
                        { value: 103494.0, name: 'Equine species, live' },
                        { value: 1653115133.0, name: 'Live animals chiefly for food' },
                        { value: 1980046048.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 4910683800.0, name: 'Meat and preparations' },
                        { value: 82208730748.0, name: 'Food and live animals chiefly for food' }
                    ],
                },
                //im

                {
                    data: [
                        { value: 22499914.0, name: 'Equine species, live' },
                        { value: 895236941.0, name: 'Live animals chiefly for food' },
                        { value: 4442988914.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 4461493430.0, name: 'Meat and preparations' },
                        { value: 43094596400.0, name: 'Food and live animals chiefly for food' }
                    ],
                }
                ]

            }, {
                title: {
                    //text: '2012',

                },

                series: [{ //ex
                    data: [
                        { value: 5126200.0, name: 'Equine species, live' },
                        { value: 2208734150.0, name: 'Live animals chiefly for food' },
                        { value: 3896625964.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 12524882500.0, name: 'Meat and preparations' },
                        { value: 208103756532.0, name: 'Food and live animals chiefly for food' }
                    ],
                },
                //im

                {
                    data: [
                        { value: 91999748.0, name: 'Equine species, live' },
                        { value: 2409311784.0, name: 'Live animals chiefly for food' },
                        { value: 16393106952.0, name: 'Meat and edible meat offal, fresh, chilled or frozen' },
                        { value: 16439195960.0, name: 'Meat and preparations' },
                        { value: 140930722188.0, name: 'Food and live animals chiefly for food' }
                    ],
                }
                ]

            },
            ]
        };

        if (option && typeof option === "object") {
            pieChart.setOption(option2, true);
        }

        //timeline changing delegate
        //params be currentIndex, change pieChart dom's timeline
        myChart.on('timelinechanged', function (params) {
            //console.log(params);
            pieChart.dispatchAction({
                type: 'timelineChange',
                currentIndex: params.currentIndex
            });
        });

        //pie chart clicked delegate
        //params be seriesIndex
        pieChart.on('click', function (params) {
             newoption=null;
            //console.log(params.name);
            var name = params.name;
            //set new options in each if{}
            if (params.name == 'Food and live animals chiefly for food') {
                //set new options
            }
            if (params.name == 'Live animals chiefly for food') {
            }
            if (params.name == 'Meat and edible meat offal, fresh, chilled or frozen') {
            }
            if (params.name == 'Meat and preparations') {
            }
            if (params.name == 'Equine species, live') {
                newoption = {
            baseOption: {
                timeline: {
                    axisType: 'category',
                    orient: 'vertical',
                    autoPlay: true,
                    inverse: true,
                    playInterval: 3000,
                    left: null,
                    right: 10,
                    top: 20,
                    bottom: 20,
                    width: 55,
                    height: null,
                    label: {
                        normal: {
                            textStyle: {
                                color: '#ddd'
                            }
                        },
                        emphasis: {
                            textStyle: {
                                color: '#fff'
                            }
                        }
                    },
                    symbol: 'none',
                    lineStyle: {
                        color: '#555'
                    },
                    checkpointStyle: {
                        color: '#bbb',
                        borderColor: '#777',
                        borderWidth: 2
                    },
                    controlStyle: {
                        showNextBtn: false,
                        showPrevBtn: false,
                        normal: {
                            color: '#666',
                            borderColor: '#666'
                        },
                        emphasis: {
                            color: '#aaa',
                            borderColor: '#aaa'
                        }
                    },
                    data: years
                },
                backgroundColor: '#600000',
                //把数字当作了title
                title: {

                    text: '',
                    right: 80,
                    bottom: 80,
                    textStyle: {
                        fontSize: 70,
                        fontWeight: 'bolder',
                        //color:'rgba(255, 255, 255, 0.9)'
                        color: '#DAA520'
                    },
                    subtext: 'Trade Value of ESL',
                    subtextStyle: {
                        fontSize: 40,
                        //fontWeight: 'bolder',
                        //color:'#FFD700'
                        color: '#DAA520'
                    },
                },
                tooltip: {
                    padding: 5,
                    backgroundColor: '#222',
                    borderColor: '#777',
                    borderWidth: 1
                },
                xAxis: {
                    //  type: 'log',
                    type: 'value',
                    name: 'ESL Import Trade Value (US$)',
                    nameGap: 25,
                    min: 0,
                    max: getMax(0),
                    nameLocation: 'middle',
                    nameTextStyle: {
                        fontSize: 14
                    },
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLabel: {
                        textStyle: {
                            color: '#ddd'
                        }
                    }
                },
                yAxis: {
                    type: 'value',
                    name: 'ESL Export Trade Value (US$)',
                    nameGap: 25,//坐标轴标题的距离
                    min: 0,
                    max: getMax(1),
                    nameTextStyle: {
                        color: '#ccc',
                        fontSize: 14
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisTick: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        formatter: '{value} ',
                        textStyle: {
                            color: '#ddd'
                        }
                    }
                },
                grid: {
                    top: '40%',
                    left: 250,
                    right: 130
                },
                geo: {
                    top: 20,
                    left: 170,
                    right: 120,
                    height: '50%',
                    name: 'World',
                    type: 'map',
                    map: 'world',
                    roam: false,
                    label: {
                        emphasis: {
                            show: false
                        }
                    },
                    itemStyle: {
                        normal: {
                            borderColor: '#696969',
                            areaColor: '#eee8ab'//'#F5FFFA'
                        },

                        emphasis: {
                            areaColor: '#F0E68C'
                        }
                    }
                },
                toolbox: {
                    top: 20,
                    left: 10,
                    itemSize: 15,
                    iconStyle: {
                        normal: {
                            borderColor: '#eee'
                        },
                        emphasis: {
                            borderColor: '#fffb60'
                        }
                    }
                },
                brush: {    //互动，左上角
                    toolbox: ['polygon', 'keep', 'clear'],
                    brushLink: 'all',

                    outOfBrush: {
                        opacity: .1,
                        color: '#aaa'
                    }
                },

                //图例
                visualMap: [{
                    type: 'piecewise',
                    dimension: 3,
                    categories: countries,
                    left: 0,
                    top: 60,
                    calculable: true,
                    precision: 0.1,
                    textGap: 10,
                    itemGap: 3,
                    itemHeight: 10,
                    textStyle: {
                        color: '#ccc'
                    },
                    inRange: {
                        color: ['#00FFFF', '#9966cc', '#b95c25', '#eee8ab', '#a35015', '#d50390', '#36a15d', '#9dc5c8', '#e1e8c8', '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8', '#bda29a', '#376956', '#c3bed4', '#04dd98', '#d9b3e6', '#b6c3fc', '#315dbc', '#c5c975', '#476a54', '#66e638', '#a59619', '#822ee2', '#49450d', '#eeebd4']
                    },
                    outOfRange: {
                        color: '#555'
                    }
                }, {
                    show: false,
                    type: 'continuous',
                    dimension: 2,
                    min: 0,
                    max: 5,
                    inRange: {
                        symbolSize: [10, 50]
                    }
                }],
                series: [{
                    type: 'scatter',
                    id: 'gridScatter',
                    itemStyle: itemStyle,
                    data: [],
                    //圆圈各数值名称显示           
                    tooltip: {
                        formatter: function (obj) {
                            var value = obj.value;
                            return '<div style="border-bottom: 1px solid #555;padding-bottom: 5px; margin-bottom: 5px;">' + value[3] + '</div>'
                                + 'ESL Import Trade Value：' + value[0] + ' (US $)<br>'
                                + 'ESL Export Trade Value：' + value[1] + ' (US $)<br>'
                                + 'Total Trade Value with China：' + value[2] + ' (US billion $)<br>';
                        }
                    }
                },
                //上方地图的鼠标移动显示
                {
                    type: 'scatter',
                    id: 'geoScatter',
                    coordinateSystem: 'geo',

                    itemStyle: {
                        normal: {

                            opacity: 1,
                            shadowBlur: 5,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        },
                    },
                    data: coords,
                    symbolSize: 15,
                    tooltip: {
                        formatter: function (obj) {
                            var value = obj.value;
                            return schema[3].text + '：' + value[3];
                        }
                    }
                }],
                animationDurationUpdate: 1000,
                animationEasingUpdate: 'quinticInOut'
            },
            options: []
        };
                //这个循环是针对闪动的数字
        for (var n = 0; n < years.length; n++) {
            newoption.options.push({
                title: {
                    text: years[n]
                },
                series: {
                    id: 'gridScatter',
                    type: 'scatter',
                    itemStyle: itemStyle,
                    data: subdata[n].map(function (item, index) {
                        return item.concat([countries[index]]);
                    }),
                    symbolSize: 10
                }
            });
        }
        console.log(newoption);

        myChart.setOption(newoption,true);
            }
            //pieChart.setOption(newoption,true);
        });

    </script>
</body>

</html>